<app-header></app-header>

<!-- Contenedor para la selección de temas -->
<div class="flex justify-center items-center gap-4 mt-6 mb-6">
  <span class="text-base font-medium text-gray-700 dark:text-gray-300">
    Selecciona un Tema:
  </span>

  <div class="theme-selector flex gap-2">
    <button
      (click)="setTheme('light')"
      [class.active]="currentTheme === 'light'"
      class="flex items-center gap-2 px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600 transition"
    >
      <span class="material-icons">light_mode</span>
      Claro
    </button>
    <button
      (click)="setTheme('dark')"
      [class.active]="currentTheme === 'dark'"
      class="flex items-center gap-2 px-4 py-2 rounded-md bg-gray-800 text-white hover:bg-gray-600 transition"
    >
      <span class="material-icons">dark_mode</span>
      Oscuro
    </button>
    <button
      (click)="setTheme('system')"
      [class.active]="currentTheme === 'system'"
      class="flex items-center gap-2 px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white hover:bg-gray-400 dark:hover:bg-gray-500 transition"
    >
      <span class="material-icons">settings</span>
      Sistema
    </button>
  </div>
</div>

<!-- Contenedor principal -->
<div
  class="container mx-auto h-screen px-6 py-8 bg-gray-50 dark:bg-gray-900 overflow-auto"
  style="height: calc(100vh - 96px)"
>
  <h1
    class="text-5xl font-extrabold text-kingfisher-daisy-600 dark:text-white text-center mb-8"
  >
    Ajustes de Usuario
  </h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Información del Perfil -->
    <div class="bg-white dark:bg-gray-800 shadow-xl rounded-lg p-8">
      <h2
        class="text-2xl font-semibold text-kingfisher-daisy-600 dark:text-white mb-6"
      >
        Información del Perfil
      </h2>
      <form [formGroup]="userForm" (ngSubmit)="updateUser()">
        <div class="mb-6">
          <label
            for="username"
            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
          >
            Nombre de Usuario:
          </label>
          <input
            id="username"
            formControlName="username"
            class="w-full border rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-kingfisher-daisy-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition"
            placeholder="Introduce tu nombre de usuario"
          />
        </div>

        <div class="mb-6">
          <label
            for="email"
            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
          >
            Email:
          </label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="w-full border rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-kingfisher-daisy-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition"
            placeholder="Introduce tu email"
          />
        </div>

        <div class="mb-6">
          <label
            for="foto_perfil"
            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
          >
            Foto de Perfil:
          </label>
          <input
            id="foto_perfil"
            type="file"
            (change)="onFileChange($event)"
            class="w-full border rounded-md p-3 focus:outline-none dark:bg-gray-700 dark:border-gray-600 transition"
          />
        </div>

        <button
          type="submit"
          class="flex items-center justify-center gap-2 w-full bg-kingfisher-daisy-500 text-white py-3 rounded-md hover:bg-kingfisher-daisy-600 transition"
        >
          <span class="material-icons">save</span>
          Actualizar Información
        </button>
      </form>
    </div>

    <!-- Seguridad -->
    <div class="bg-white dark:bg-gray-800 shadow-xl rounded-lg p-8">
      <h2
        class="text-2xl font-semibold text-kingfisher-daisy-600 dark:text-white mb-6"
      >
        Seguridad
      </h2>
      <form [formGroup]="securityForm" (ngSubmit)="updateSecurity()">
        <div class="mb-6">
          <label
            for="password"
            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
          >
            Cambiar Contraseña:
          </label>
          <input
            id="password"
            type="password"
            formControlName="password"
            class="w-full border rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-kingfisher-daisy-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition"
            placeholder="Nueva contraseña"
          />
        </div>

        <div class="mb-6">
          <label
            for="confirmPassword"
            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
          >
            Confirmar Contraseña:
          </label>
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            class="w-full border rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-kingfisher-daisy-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white transition"
            placeholder="Confirma tu nueva contraseña"
          />
        </div>

        <button
          type="submit"
          class="flex items-center justify-center gap-2 w-full bg-kingfisher-daisy-500 text-white py-3 rounded-md hover:bg-kingfisher-daisy-600 transition"
        >
          <span class="material-icons">lock</span>
          Actualizar Seguridad
        </button>
      </form>
    </div>
  </div>

  <!-- Eliminar Cuenta -->
  <div class="mt-10 bg-white dark:bg-gray-800 shadow-xl rounded-lg p-8">
    <h2 class="text-2xl font-semibold text-red-500 dark:text-red-400 mb-4">
      Eliminar Cuenta
    </h2>
    <p class="text-sm text-gray-500 dark:text-gray-300 mb-6">
      Esta acción no se puede deshacer. Asegúrate de que deseas continuar.
    </p>
    <button
      (click)="deleteUser()"
      class="flex items-center justify-center gap-2 w-full bg-red-500 text-white py-3 rounded-md hover:bg-red-600 transition"
    >
      <span class="material-icons">delete</span>
      Eliminar Cuenta
    </button>
  </div>
</div>
